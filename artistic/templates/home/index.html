{% extends 'application.html' %}
{% block title %}Artistic Photos{% endblock %}

{% block content %}

<div id="home">
  <div class="row">
    <div class="col-sm-9">
      <canvas
        ref="startingImageCanvas"
        v-bind:width="[[width]]"
        v-bind:height="[[height]]"
        v-on:mousedown="setDrag"
        v-on:mousemove="dragLine"
        v-on:mouseup="unsetDrag"
      > </canvas>
    </div>
    <div class="col-sm-3">
      <div class="card" v-bind:style="{width: '18rem', height: cardHeight() + 'rem', 'overflow-y': 'auto'}">
        <ul class="list-group list-group-flush">
          <li
            v-for="(img, index) in images"
            class="list-group-item"
            v-bind:class="{active: img.id == selected_id, 'custom-list-group-item': img.id != selected_id}"
            v-on:click="selectPhoto(img)"
          >
            [[img.name]]
          </li>
        </ul>
      </div>
    </div>
  </div>

  <form id="starting-image" enctype="multipart/form-data" method="post" action="/images/starting">

    <div class="form-group row">
      <label class="col-sm-12 col-sm-label">Starting Photo</label>
      <div class="col-sm-4">
        <input id="fileupload" class="form-control" name="starting" type="file" />
      </div>
    </div>

    <input type="submit" value="Create Starting Photo" id="submit" class="btn btn-dark" />
  </form>

  <h1 class="margin-top mt-5">How would you like to edit your photo?</h1>
  <form id="artistic-image" enctype="multipart/form-data" method="post" action="/images/artistic">
    <div class="form-group row">
      <label class="col-sm-12 col-sm-label">Style Photo</label>
      <div class="col-sm-4">
        <input id="fileupload" class="form-control" name="style" type="file" />
      </div>
    </div>

    <input type="hidden" name="canvas_image" v-bind:value="[[canvasImage]]" />
    <input type="hidden" name="starting_id" v-bind:value="[[selected_id]]"/>
    <input type="submit" value="Create Artistic Photo" id="submit" class="btn btn-primary" />
  </form>
</div>

{% endblock %}

{% block script %}
<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.2"></script>
<script src="{{ url_for('static', filename='scripts/home/index.js') }}"></script>
{% endblock %}
